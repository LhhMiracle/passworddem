<!-- 密码保险箱主页面 -->
<view class="vault-container">
  <!-- 搜索栏 -->
  <view class="search-bar">
    <view class="search-input-wrapper">
      <text class="search-icon">&#128269;</text>
      <input
        class="search-input"
        placeholder="搜索密码..."
        value="{{searchKeyword}}"
        bindinput="onSearchInput"
        confirm-type="search"
      />
      <text
        class="clear-icon"
        wx:if="{{searchKeyword}}"
        bindtap="clearSearch"
      >&#10005;</text>
    </view>
  </view>

  <!-- 分类筛选 -->
  <scroll-view class="category-scroll" scroll-x="{{true}}">
    <view class="category-list">
      <view
        class="category-item {{currentCategory === 'all' ? 'active' : ''}}"
        bindtap="selectCategory"
        data-category="all"
      >
        <text>全部</text>
        <text class="category-count">{{stats.total}}</text>
      </view>
      <view
        class="category-item {{currentCategory === item.id ? 'active' : ''}}"
        wx:for="{{categories}}"
        wx:key="id"
        bindtap="selectCategory"
        data-category="{{item.id}}"
      >
        <text>{{item.name}}</text>
        <text class="category-count">{{stats.byCategory[item.id] || 0}}</text>
      </view>
    </view>
  </scroll-view>

  <!-- 密码列表 -->
  <scroll-view class="password-list" scroll-y="{{true}}">
    <!-- 空状态 -->
    <view class="empty-state" wx:if="{{filteredPasswords.length === 0}}">
      <view class="empty-icon">&#128274;</view>
      <view class="empty-title" wx:if="{{!searchKeyword}}">还没有保存的密码</view>
      <view class="empty-title" wx:else>没有找到匹配的密码</view>
      <view class="empty-desc" wx:if="{{!searchKeyword}}">点击下方按钮添加您的第一个密码</view>
      <button class="btn-add-first" bindtap="goToAdd" wx:if="{{!searchKeyword}}">
        添加密码
      </button>
    </view>

    <!-- 密码条目 -->
    <view
      class="password-item"
      wx:for="{{filteredPasswords}}"
      wx:key="id"
      bindtap="goToDetail"
      data-id="{{item.id}}"
    >
      <view class="item-icon" style="background-color: {{getCategoryColor(item.category)}};">
        <text>{{item.title[0]}}</text>
      </view>
      <view class="item-content">
        <view class="item-title">{{item.title}}</view>
        <view class="item-username">{{item.username}}</view>
      </view>
      <view class="item-actions">
        <view class="action-btn" catchtap="copyPassword" data-id="{{item.id}}">
          <text>&#128203;</text>
        </view>
      </view>
    </view>
  </scroll-view>

  <!-- 添加按钮 -->
  <view class="fab-button" bindtap="goToAdd">
    <text>+</text>
  </view>
</view>
